<nav class="navbar navbar-expand-lg bg-primary navbar-dark shadow-lg">
  <div class="container-fluid">
    <ul class="navbar-nav mb-lg-0" (click)="toggleSidebar()">
      <li class="nav-item">
        <a class="nav-link nav-search-button">
          <fa-icon [icon]="menuIcon" />
        </a>
      </li>
    </ul>
    <div class="collapse navbar-collapse">
      <app-logo class="flex-grow-1"></app-logo>
      <form class="d-flex search-bar-container" role="search" (click)="openCardSearchModal()">
        <div class="input-group input-group-sm">
          <span class="input-group-text bg-primary-subtle border-0">
            <fa-icon [icon]="searchIcon" />
          </span>
          <input type="text" class="search-bar form-control bg-primary-subtle border-0" placeholder="Buscar carta...">
        </div>
      </form>
    </div>

    <div class="d-flex flex-grow-1 d-lg-none">
      <app-logo [showTitle]="false" class="flex-grow-1 align-content-center me-3"></app-logo>
      <ul class="navbar-nav me-auto ms-3 mb-lg-0" (click)="openCardSearchModal()">
        <li class="nav-item">
          <a class="nav-link nav-search-button">
            <fa-icon [icon]="searchIcon" />
          </a>
        </li>
      </ul>
    </div>
    <ul class="navbar-nav ms-2" placement="bottom" [ngbPopover]="popContent" [autoClose]="'outside'">
      <li class="nav-item user-profile">
        <img class="nav-user-profile" src="{{ getAvatar() }}" id="img">
      </li>
    </ul>
  </div>
</nav>


<ng-template #popContent>
  @if(isLoggedIn()) {
    <span>
      ¡Estás conectado!
    </span>
  }
  @else {
    <span>
      No iniciaste sesión
    </span>
  }
  <div class="d-grid gap-2 mt-3">
    <button class="btn btn-primary" type="button" (click)="toggleTheme()">
      <fa-icon [icon]="theme.icon" />
    </button>
    @if(!isLoggedIn()) {
    <button class="btn btn-primary" type="button" (click)="login()">
      Iniciar sesión con &nbsp; <img src="assets/google.svg" alt="Google" width="50" height="18" class="svg-invert">
    </button>
    }
    @else {
    <!-- <button class="btn btn-primary" type="button">Editar perfil</button> -->
    <button class="btn btn-primary" type="button" (click)="logout()">Cerrar sesión</button>
    }
  </div>
</ng-template>